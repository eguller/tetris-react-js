{"version":3,"sources":["components/Game.module.css","components/Next.module.css","tetris/Colors.js","components/Cell.js","helpers/Helpers.js","components/Next.js","components/Score.js","components/Level.js","tetris/Tetromino.js","tetris/Piece.js","components/Game.js","tetris/State.js","index.js","tetris/Tetris.js","components/Cell.module.css"],"names":["module","exports","Colors","RED","BLUE","YELLOW","GREEN","Cell","props","useState","tetromino","setTetromino","useEffect","className","styles","tetromino2Class","clazz","empty","isFilled","color","blue","red","green","yellow","createMatrix","state","map","tetraminos","rowIndex","cols","tetramino","colIndex","row","createTetrominoRow","Next","next","setNext","tetrominos","matrix","class","Score","score","setScore","Level","level","setLevel","TetrominoStates","Tetromino","_state","isEmpty","isShadow","Piece","x","y","rand","Math","floor","random","Object","keys","length","randomColor","_x","_y","_color","width","height","matrixCoordinates","coordinates","i","j","push","rotate","matrixState","newState","nextPieceState","leftMost","min","coordinate","rightMost","max","newX","newY","abs","move","moveLeft","moveRight","moveDown","gameState","piece","every","isOnSamePosition","toTetrominos","randomPiece","o","z","s","l","m","pieces","emtpyPiece","Game","resumePauseButton","tetris","setState","onStateChange","isStarted","isRunning","onClick","pause","btn","btnPause","resume","btnNew","visibleMatrix","nextPiece","visibleNextPiece","gameOver","isGameOver","content","header","controls","controlsNext","controlsScore","controlsLevel","controlsButtons","start","controlsInfo","createState","_height","_width","paused","started","_level","_score","_nextPiece","_currentPiece","totalNumberOfClearedRows","onLevelChangeAction","initMatrix","_matrix","_visibleMatrix","calculateScore","numberOfClearedRows","pow","createVisibleMatrix","slice","forEach","overlaps","some","setGameOver","mergePieceIntoMatrix","action","nextPosition","clearRows","cell","splice","emtyRow","unshift","notifyLevelChangeListener","isPaused","moveCurrentPieceDown","newPosition","rotateCurrentPiece","onLevelChange","timer","stateChangeListeners","startTimer","calculateSpeedForCurrentLevel","delay","clearInterval","setInterval","tick","stopTimer","notifyOnStateChangeListeners","fn","createTetris","document","addEventListener","event","keyName","key","ReactDOM","render","StrictMode","getElementById"],"mappings":"2GACAA,EAAOC,QAAU,CAAC,QAAU,sBAAsB,OAAS,qBAAqB,OAAS,qBAAqB,SAAW,uBAAuB,aAAe,2BAA2B,cAAgB,4BAA4B,cAAgB,4BAA4B,gBAAkB,8BAA8B,aAAe,2BAA2B,IAAM,kBAAkB,OAAS,qBAAqB,SAAW,uBAAuB,SAAW,yB,mBCA/cD,EAAOC,QAAU,CAAC,OAAS,qBAAqB,IAAM,oB,gICDhDC,EAAS,CACXC,IAAK,EACLC,KAAM,EACNC,OAAQ,EACRC,MAAO,GASIJ,I,uBCEAK,EAZK,SAACC,GAAW,IAAD,EACOC,mBAASD,EAAME,WADtB,mBACpBA,EADoB,KACTC,EADS,KAO3B,OAJAC,qBAAU,WACND,EAAaH,EAAME,aACpB,CAACF,EAAME,YAGN,qBAAKG,UAAS,UAAKC,IAAOJ,UAAZ,YAAyBK,EAAgBL,EAAWI,SCTpEC,EAAkB,SAACL,EAAWI,GAChC,IAAIE,EAAQF,EAAOG,MACnB,OAAgB,MAAbP,EACQM,EACDN,EAAUQ,WACbhB,EAAOE,OAASM,EAAUS,MAClBL,EAAOM,KACRlB,EAAOC,MAAQO,EAAUS,MACxBL,EAAOO,IACRnB,EAAOI,QAAUI,EAAUS,MAC1BL,EAAOQ,MACRpB,EAAOG,SAAWK,EAAUS,MAC3BL,EAAOS,OAEPT,EAAOG,MAGXH,EAAOG,OAYhBO,EAAe,SAACC,EAAOX,GACzB,OAAY,MAATW,EACQ,KAEIA,EAAMC,KAAK,SAACC,EAAaC,GACpC,OAbmB,SAACD,EAAYC,EAAUd,GAC9C,IAAMe,EAAOF,EAAWD,KAAK,SAACI,EAAWC,GAAZ,OACzB,cAAC,EAAD,CAAMrB,UAAWoB,GAAjB,UAAoCF,EAApC,YAAgDG,OAGpD,OADqB,qBAAKlB,UAAWC,EAAOkB,IAAvB,SAA4CH,GAAXD,GAS3CK,CAAmBN,EAAYC,EAAUH,OCVzCS,EAtBK,SAAC1B,GAAW,IAAD,EACHC,mBAASD,EAAM2B,MADZ,mBACpBA,EADoB,KACdC,EADc,KAG3BxB,qBAAU,WACNwB,EAAQ5B,EAAM2B,QACf,CAAC3B,EAAM2B,OAEV,IAAME,EAAU,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAME,aACnBC,EAASD,EAAab,EAAaa,GAAc,GAEvD,OACI,gCACI,qBAAKE,MAAM,QAAX,SACI,0CAEL,qBAAK1B,UAAWC,IAAOwB,OAAvB,SACKA,QCHDE,EAfM,SAAChC,GAAW,IAAD,EACFC,mBAASD,EAAMiC,OADb,mBACrBA,EADqB,KACdC,EADc,KAO5B,OAJA9B,qBAAU,WACN8B,EAASlC,EAAMiC,SAChB,CAACjC,EAAMiC,QAGN,gCACI,sBAAMF,MAAM,QAAZ,mBACA,mBAAGA,MAAM,WAAT,SAAqBE,QCIlBE,EAfM,SAACnC,GAAW,IAAD,EACFC,mBAASD,EAAMoC,OADb,mBACrBA,EADqB,KACdC,EADc,KAO5B,OAJAjC,qBAAU,WACNiC,EAASrC,EAAMoC,SAChB,CAACpC,EAAMoC,QAGN,gCACI,sBAAML,MAAM,QAAZ,mBACA,mBAAGA,MAAM,WAAT,SAAqBK,Q,uBCX3BE,EACK,EADLA,EAEM,EAFNA,EAGM,EAENC,EAAY,SAACtB,EAAON,GAEtB,IAAI6B,EAAkB,MAATvB,EAAgBqB,EAAwBrB,EAGrD,MAAO,CACHwB,QADG,WAEC,OAAOD,IAAWF,GAAyBE,IAAWF,GAE1DI,SAJG,WAKC,OAAOF,IAAWF,GAEtB5B,SAPG,WAQC,OAAO8B,IAAWF,GAEtB3B,MAZSA,EAaTM,MAAOuB,IClBTG,EAAQ,SAARA,EAAS,GAAkD,IAAD,IAAhDC,SAAgD,MAA5C,EAA4C,MAAzCC,SAAyC,MAArC,EAAqC,MAAlClC,aAAkC,MPI5C,WAChB,IAAMmC,EAAOC,KAAKC,MAAMD,KAAKE,SAAWC,OAAOC,KAAKzD,GAAQ0D,QAE5D,OADuB1D,EAAOwD,OAAOC,KAAKzD,GAAQoD,IONhBO,GAA0B,EAAXpC,EAAW,EAAXA,MAE7CqC,EAAKV,EACLW,EAAKV,EACLW,EAAS7C,EACT6B,EAASvB,EACTwC,EAAQjB,EAAO,GAAGY,OAClBM,EAASlB,EAAOY,OAyDdO,EAAoB,WAEtB,IADA,IAAMC,EAAc,GACZC,EAAI,EAAGA,EAAIH,EAAQG,IACvB,IAAI,IAAIC,EAAI,EAAGA,EAAIL,EAAOK,IAlEnB,IAmEAtB,EAAOqB,GAAGC,IACTF,EAAYG,KAAK,CAACnB,EAAIkB,EAAIR,EAAKT,EAAIgB,EAAIN,IAInD,OAAOK,GA4CX,MAAO,CACHI,OA9GW,SAACC,GAEZ,IADA,IAAIC,EAAW,GACPL,EAAI,EAAGA,EAAIJ,EAAOI,IAAK,CAC3BK,EAASH,KAAK,IACd,IAAI,IAAID,EAAI,EAAGA,EAAIJ,EAAQI,IACvBI,EAASL,GAAGE,KAAKvB,EAAOkB,EAASI,EAAI,GAAGD,IAIhD,IAAMM,EAAiBxB,EAAM,CAACC,EAAGU,EAAIT,EAAGU,EAAI5C,MAAO6C,EAAQvC,MAAOiD,IAC5DE,EAAWrB,KAAKsB,IAAL,MAAAtB,KAAI,YAAQoB,EAAeR,oBAAoBzC,KAAI,SAAAoD,GAAU,OAAIA,EAAW1B,OACzF2B,EAAYxB,KAAKyB,IAAL,MAAAzB,KAAI,YAAQoB,EAAeR,oBAAoBzC,KAAI,SAAAoD,GAAU,OAAIA,EAAW1B,OAExF6B,EAAOnB,EACPoB,EAAOnB,EAUX,OARGa,EAAW,IACVK,EAAQnB,EAAKP,KAAK4B,IAAIP,IAGvBG,GAAaN,EAAYR,MAAQ,IAChCgB,EAAOnB,GAAMiB,GAAaN,EAAYR,MAAQ,KAG3Cd,EAAM,CAACC,EAAG6B,EAAM5B,EAAG6B,EAAM/D,MAAO6C,EAAQvC,MAAOiD,KAuFtDU,KAnFS,SAAChC,EAAGC,GACb,OAAOF,EAAMC,IAmFbiC,SAhFa,WACb,IAAIJ,EAAOnB,EAAK,EACZoB,EAAOnB,EAQX,OANiBR,KAAKsB,IAAL,MAAAtB,KAAI,YAAQY,IAAoBzC,KAAI,SAAAoD,GAAU,OAAIA,EAAW1B,QAE/D,IACX6B,EAAOnB,GAGJX,EAAM,CAACC,EAAG6B,EAAM5B,EAAG6B,EAAM/D,MAAO6C,EAAQvC,MAAMuB,KAuErDsC,UApEc,SAACb,GACf,IAAIQ,EAAOnB,EAAK,EACZoB,EAAOnB,EAMX,OAJgBR,KAAKyB,IAAL,MAAAzB,KAAI,YAAQY,IAAoBzC,KAAI,SAAAoD,GAAU,OAAIA,EAAW1B,QAC7DqB,EAAYR,MAAQ,IAChCgB,EAAOnB,GAEJX,EAAM,CAACC,EAAG6B,EAAM5B,EAAG6B,EAAM/D,MAAO6C,EAAQvC,MAAMuB,KA6DrDuC,SA9Ca,SAACC,GACd,IACMC,EAAQtC,EAAM,CAACC,EAAGU,EAAIT,EADfU,EAAK,EACmB5C,QAAOM,UAO5C,OAN0BgE,EAAMtB,oBACMuB,OAAM,SAAAZ,GAExC,OADiBA,EAAWzB,EAAImC,EAAUtB,SAAYsB,EAAUtE,SAAS4D,MAKlEW,EAEYtC,EAAM,CAACC,EAAGU,EAAIT,EAAGU,EAAI5C,QAAOM,WAmCnD2B,EAAGU,EACHT,EAAGU,EACH4B,iBAhCqB,SAACF,GACtB,OAAO3B,IAAO2B,EAAMrC,GAAKW,IAAO0B,EAAMpC,GAgCtCc,oBACAhD,MAAO6C,EACP3B,WAfe,WACf,OAjBiB,SAACZ,EAAON,GAEzB,IADA,IAAMkB,EAAa,GACXgC,EAAI,EAAGA,EAAI5C,EAAMmC,OAAQS,IAAK,CAElC,IADA,IAAMrC,EAAM,GACJsC,EAAI,EAAGA,EAAI7C,EAAM,GAAGmC,OAAQU,IAAK,CACrC,IAAI5D,EAAYqC,IArGb,IAsGAtB,EAAM4C,GAAGC,KACV5D,EAAYqC,EAAUD,EAAwB3B,IAEhDa,EAAIuC,KAAK7D,GAEb2B,EAAWkC,KAAKvC,GAEpB,OAAOK,EAIAuD,CAAa5C,EAAQgB,MA4H9B6B,EAAc,WAChB,IAAMxB,EAnGQlB,EAAM,CAAC1B,MAPF,CACf,CAAC,EAAE,EAAE,EAAE,GACP,CAAC,EAAE,EAAE,EAAE,GACP,CAAC,EAAE,EAAE,EAAE,GACP,CAAC,EAAE,EAAE,EAAE,MAuGLqE,EAzFQ3C,EAAM,CAAC1B,MANF,CACf,CAAC,EAAE,GACH,CAAC,EAAE,MA8FDsE,EA/EQ5C,EAAM,CAAC1B,MANF,CACf,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,MAmFHuE,EArEQ7C,EAAM,CAAC1B,MANF,CACf,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,MAyEH6C,EA1DQnB,EAAM,CAAC1B,MAPF,CACf,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,MA+DHwE,EA/CQ9C,EAAM,CAAC1B,MAPF,CACf,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,MAoDHyE,EApCQ/C,EAAM,CAAC1B,MAPF,CACf,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,MA4CH0E,GA5BQhD,EAAM,CAAC1B,MAPF,CACf,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,MAgCM,CACX4C,EACAyB,EACAC,EACAC,EACA1B,EACA2B,EACAC,IAKEL,EAAcM,EADR5C,KAAKC,MAAMD,KAAKE,SAAW0C,EAAOvC,SAE9C,OAAOiC,GAGLO,EAAa,WACf,OAhCcjD,EAAM,CAAC1B,MAPF,CACf,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,GACL,CAAC,EAAE,EAAE,OCnJE4E,EA9EK,SAAC7F,GACjB,IAYI8F,EAZEC,EAAS/F,EAAM+F,OADM,EAED9F,mBAASD,EAAM+F,OAAO9E,OAFrB,mBAEpBA,EAFoB,KAEb+E,EAFa,KAIrBC,EAAgB,SAACzD,GACnBwD,EAASxD,IAGbpC,qBAAU,WACN2F,EAAOE,cAAcA,KACtB,CAACF,IAIA9E,EAAMiF,cAEFJ,EADA7E,EAAMkF,YAEF,wBAAQC,QAASL,EAAOM,MAAOhG,UAAS,UAAKC,IAAOgG,IAAZ,YAAmBhG,IAAOiG,UAAlE,mBAGA,wBAAQH,QAASL,EAAOS,OAAQnG,UAAS,UAAKC,IAAOgG,IAAZ,YAAmBhG,IAAOmG,QAAnE,qBAKZ,IAAM3E,EAASd,EAAaC,EAAMyF,gBAAiBpG,KAE7CqG,EAAY1F,EAAM0F,YAClBC,EAAmBD,GAAwBf,IAE3CiB,EAAW5F,EAAM6F,aACnB,qBAAKzG,UAAWC,IAAOuG,SAAvB,SACI,4CAGJ,GAEJ,OACI,sBAAKxG,UAAWC,IAAOyG,QAAvB,UACI,qBAAK1G,UAAWC,IAAO0G,OAAvB,SAA+B,kDAE/B,sBAAK3G,UAAWC,IAAOwB,OAAvB,UACKA,EACA+E,KAEL,sBAAKxG,UAAWC,IAAO2G,SAAvB,UACI,qBAAK5G,UAAWC,IAAO4G,aAAvB,SACI,cAAC,EAAD,CAAMvF,KAAMiF,MAEhB,qBAAKvG,UAAWC,IAAO6G,cAAvB,SACI,cAAC,EAAD,CAAOlF,MAAOhB,EAAMgB,YAExB,qBAAK5B,UAAWC,IAAO8G,cAAvB,SACI,cAAC,EAAD,CAAOhF,MAAOnB,EAAMmB,YAExB,sBAAK/B,UAAWC,IAAO+G,gBAAvB,UACI,qBAAKhH,UAAWC,IAAOkB,IAAvB,SACI,wBAAQ4E,QAASL,EAAOuB,MAAOjH,UAAS,UAAKC,IAAOgG,IAAZ,YAAmBhG,IAAOmG,QAAlE,wBAEJ,qBAAKpG,UAAWC,IAAOkB,IAAvB,SACKsE,OAGT,qBAAKzF,UAAWC,IAAOiH,aAAvB,SACI,oBAAGxF,MAAM,WAAT,uCAC8B,uBAD9B,oBAEqB,uBAFrB,oBAGqB,uBAHrB,sBAIuB,uBAJvB,yBAK0B,mC,QCxExCyF,EAAc,SAAC9D,EAAQD,GACzB,IAAIgE,EAAU/D,EACVgE,EAASjE,EACTkE,GAAU,EACVC,GAAU,EACVf,GAAW,EACXgB,EAAU,EACVC,EAAS,EACTC,EAAa,KACbC,EAAgB,KAChBC,EAA2B,EAC3BC,EAAsB,KAkBpBC,EAAa,SAACzE,EAAQD,GAExB,IADA,IAAI2E,EAAU,GACLvE,EAAI,EAAGA,EAAIH,EAAQG,IAAK,CAC7BuE,EAAQvE,GAAK,GACb,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAOK,IACvBsE,EAAQvE,GAAGC,GAAKvB,IAGxB,OAAO6F,GAGPtG,EAASqG,EAAWzE,EAAQD,GAC5B4E,EAAc,YAAOvG,GA4BnBpB,EAAW,SAAC4D,GACd,OAAOxC,EAAOwC,EAAWzB,GAAGyB,EAAW1B,GAAGlC,YAoCxC4H,EAAiB,SAACR,EAAQS,EAAqBV,GACjD,OAAOC,EAAS/E,KAAKyF,IAAID,EAAqB,GAAKV,GAGjDY,EAAsB,SAAC3G,GACzB,IAAM4E,EAAgB5E,EAAOZ,KAAI,SAAAM,GAAG,OAAIA,EAAIkH,WAO5C,OANoB,MAAjBV,GACCA,EAAcrE,oBAAoBgF,SAAQ,SAAArE,GACtC,IAAMpE,EAAYqC,EAAUD,EAAwB0F,EAAcrH,OAClE+F,EAAcpC,EAAWzB,GAAGyB,EAAW1B,GAAK1C,KAG7CwG,GAGLkC,EAAW,SAAC3D,GAKd,OAJgBA,EAAMtB,oBAAoBkF,MAAM,SAAAvE,GAC5C,OAAOxC,EAAOwC,EAAWzB,GAAGyB,EAAW1B,GAAGlC,eAM5CoI,EAAc,WAClBlB,GAAU,EACVD,GAAS,EACTd,GAAW,GAGPkC,EAAuB,SAAC9D,GAC1BA,EAAMtB,oBAAoBgF,SAAS,SAAArE,GAC/BxC,EAAOwC,EAAWzB,GAAGyB,EAAW1B,GAAKL,EAAUD,EAAwB2C,EAAMtE,WAgB/EiE,EAAO,SAACoE,GACV,GAAoB,MAAjBhB,EAAH,CAGA,IAAIiB,EAAeD,IACA,MAAhBC,GAAyBL,EAASK,KACjCjB,EAAgBiB,EAChBZ,EAAiBI,EAAoB3G,MAIvCoH,EAAY,WAEd,IADA,IAAIX,EAAsB,EAClB1E,EAAIH,EAAS,EAAGG,GAAK,GAAK,CAE9B,GADiB/B,EAAO+B,GAAGqB,OAAM,SAAAiE,GAAI,OAAIA,EAAK1G,aAE1C,MAIJ,GADkBX,EAAO+B,GAAGqB,OAAM,SAAAiE,GAAI,OAAIA,EAAKzI,cAClC,CACToB,EAAOsH,OAAOvF,EAAG,GAEjB,IADA,IAAMwF,EAAU,GACRvF,EAAI,EAAGA,EAAIL,EAAOK,IACtBuF,EAAQtF,KAAKxB,KAEjBT,EAAOwH,QAAQD,GACfd,SAEA1E,IAGR,OAAO0E,GAuBLgB,EAA4B,SAACnH,GAC5B8F,GACCA,EAAoB9F,IAI5B,MAAO,CACH+D,UA1Mc,WACd,OAAOyB,IAAYD,GA0MnBzB,UAvMc,WACd,OAAO0B,GAuMP4B,SAhMa,WACb,OAAO7B,GAgMPL,MA9KU,WACVK,GAAS,EACTC,GAAU,EACVf,GAAW,EACXgB,EAAS,EACTC,EAAS,EACThG,EAASqG,EAAWV,EAASC,GAC7BM,EAAgB3C,IAChB0C,EAAa1C,IACbgD,EAAiBI,EAAoB3G,IAsKrCuE,MAnKU,WACVsB,GAAS,GAmKTnB,OAhKW,WACXmB,GAAS,GAgKTvF,MAzBU,WACV,OAAOyF,GAyBP5F,MA9BU,WACV,OAAO6F,GA8BPpH,WACAoG,WA3Me,WACf,OAAOD,GA2MP4C,qBAhJyB,WACzB,GAAoB,MAAjBzB,EAIH,GAAGY,EAASZ,GACRc,QADJ,CAIA,IAAMY,EAAc1B,EAAcjD,SAAS,CAACrE,WAAUgD,WAGnDgG,EAAYvE,iBAAiB6C,IAC5Be,EAAqBW,GA7BzB1B,EAAgBD,EAChBA,EAAa1C,KA+BT2C,EAAgB0B,EAEpB,IAAMnB,EAAsBW,KAC5BjB,GAA0BM,GAtGF,IA6EpBV,IACAI,EAA2B,EAC3BsB,EAA0B1B,IAyB9BC,EAASQ,EAAeR,EAAQS,EAAqBV,GACrDQ,EAAiBI,EAAoB3G,KA2HrC4E,cAtCkB,WACpB,OAAO2B,GAsCLsB,mBAtFuB,WACvB/E,GAAK,kBAAMoD,EAAchE,OAAO,CAACP,MAAOiE,QAsFxC7C,SAnFa,WACbD,GAAK,kBAAMoD,EAAcnD,eAmFzBC,UAhFc,WACdF,GAAK,kBAAMoD,EAAclD,UAAU,CAACrB,MAAOiE,QAgF3Cf,UA9Bc,WACd,OAAOoB,GA8BP6B,cA3BkB,SAACZ,GACnBd,EAAsBc,KC5MxBjD,ECHe,WAA+C,IAAD,yDAA3B,CAACrC,OAAQ,GAAID,MAAM,IAApCC,EAA4C,EAA5CA,OAAQD,EAAoC,EAApCA,MACrBgE,EAAU/D,EACVgE,EAASjE,EACTxC,EAAQuG,EAAYC,EAASC,GAC/BmC,EAAQ,KACNC,EAAuB,GAE7B7I,EAAM2I,eAAc,SAACxH,GAAD,OAAW2H,EAAWF,EAAOG,EAA8B5H,OAE/E,IAAM2H,EAAa,SAACF,EAAOI,GAMvB,OALa,MAATJ,GACAK,cAAcL,GAGDM,YAAYC,EAAMH,IAIjCI,EAAY,SAACR,GACF,MAATA,GACAK,cAAcL,IAIhBG,EAAgC,SAAC5H,GACnC,OAAO,IAAOW,KAAKyF,IAAI,GAAKpG,EAAQ,IAmBlCgI,EAAO,WACJnJ,EAAMkF,cAIXlF,EAAMwI,uBACHxI,EAAM6F,cACLuD,EAAUR,GAEdS,MAGEA,EAA+B,WACjCR,EAAqBnB,SAAQ,SAAA4B,GAAE,OAAIA,EAAG,eAAItJ,QAGxCuF,EAAS,WACXvF,EAAMuF,SACN8D,IACAT,EAAQE,EAAWF,EAAOG,EAA8B/I,EAAMmB,WAI5DkF,EAAQ,WACNrG,EAAMiF,cAGVjF,EAAMqG,QACNgD,IACAT,EAAQE,EAAWF,EAAOG,EAA8B/I,EAAMmB,YAG5DiE,EAAQ,WACNpF,EAAMuI,aAGG,MAATK,GACAK,cAAcL,GAElB5I,EAAMoF,QACNgE,EAAUR,GACVS,MAGEd,EAAW,WACb,OAAOvI,EAAMuI,YAGX3E,EAAW,WACb5D,EAAM4D,WACNyF,KAGExF,EAAY,WACd7D,EAAM6D,YACNwF,KAGEX,EAAqB,WACvB1I,EAAM0I,qBACNW,KAKJ,MAAO,CACHrE,cADG,SACWsE,GACVT,EAAqB/F,KAAKwG,IAG9BzD,WALG,WAMC,OAAO7F,EAAM4F,UAGjBV,UATG,WAUC,OAAOlF,EAAMkF,aAGjBD,UAbG,WAcC,OAAOjF,EAAMiF,aAEjBjF,QACA0I,qBACA9E,WACAC,YACAwC,QACAjB,QACAmD,WACAhD,SACA4D,OACA1G,OAAQ+D,EACRhE,MAAOiE,GDpIA8C,GACfzE,EAAOuB,QACPmD,SAASC,iBAAiB,WAAW,SAACC,GAClC,IAAMC,EAAUD,EAAME,IAClB9E,EAAOI,YACS,YAAZyE,EACA7E,EAAO4D,qBACY,cAAZiB,EACP7E,EAAOqE,OAEU,cAAZQ,EACL7E,EAAOlB,WACY,eAAZ+F,EACP7E,EAAOjB,YACY,MAAZ8F,GACP7E,EAAOM,QAGI,MAAZuE,IACK7E,EAAOyD,WACPzD,EAAOS,SAEPT,EAAOuB,YAKvBwD,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,CAAMjF,OAAQA,MAElB0E,SAASQ,eAAe,U,kBEpC5BzL,EAAOC,QAAU,CAAC,UAAY,wBAAwB,MAAQ,oBAAoB,IAAM,kBAAkB,MAAQ,oBAAoB,KAAO,mBAAmB,OAAS,wB","file":"static/js/main.671d02e5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Game_content__2Np0v\",\"header\":\"Game_header__3blVf\",\"matrix\":\"Game_matrix__1FwpS\",\"controls\":\"Game_controls__sGFqi\",\"controlsNext\":\"Game_controlsNext__sQewC\",\"controlsScore\":\"Game_controlsScore__11eOJ\",\"controlsLevel\":\"Game_controlsLevel__2nv5M\",\"controlsButtons\":\"Game_controlsButtons__10Co-\",\"controlsInfo\":\"Game_controlsInfo__2H7J3\",\"btn\":\"Game_btn__3vWIp\",\"btnNew\":\"Game_btnNew__3pc04\",\"btnPause\":\"Game_btnPause__2USDv\",\"gameOver\":\"Game_gameOver__3lpfO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"matrix\":\"Next_matrix__1dz8V\",\"row\":\"Next_row__2NyQl\"};","const Colors = {\n    RED: 1,\n    BLUE: 2,\n    YELLOW: 3,\n    GREEN: 4,\n};\n\nconst randomColor = () => {\n    const rand = Math.floor(Math.random() * Object.keys(Colors).length);\n    const randColorValue = Colors[Object.keys(Colors)[rand]];\n    return randColorValue;\n}\n\nexport default Colors;\nexport {randomColor}\n","import styles from \"./Cell.module.css\";\nimport React, { useEffect, useState } from 'react';\nimport {tetromino2Class} from \"../helpers/Helpers\";\nexport const Cell = (props) => {\n    const [tetromino, setTetromino] = useState(props.tetromino);\n\n    useEffect(() => {\n        setTetromino(props.tetromino);\n    }, [props.tetromino])\n\n    return (\n        <div className={`${styles.tetromino} ${tetromino2Class(tetromino, styles)}`} />\n    )\n}\n\nexport default Cell;\n","import Colors from \"../tetris/Colors\";\nimport Cell from \"../components/Cell\";\nconst tetromino2Class = (tetromino, styles) => {\n    let clazz = styles.empty;\n    if(tetromino == null){\n        return clazz;\n    } else if(tetromino.isFilled()){\n        if(Colors.BLUE === tetromino.color){\n            return styles.blue;\n        } else if(Colors.RED === tetromino.color){\n            return styles.red;\n        } else if(Colors.GREEN === tetromino.color){\n            return styles.green;\n        } else if(Colors.YELLOW === tetromino.color){\n            return styles.yellow;\n        } else {\n            return styles.empty;\n        }\n    } else {\n        return styles.empty;\n    }\n};\n\nconst createTetrominoRow = (tetraminos, rowIndex, styles) => {\n    const cols = tetraminos.map( (tetramino, colIndex) =>\n        <Cell tetromino={tetramino} key={`${rowIndex}-${colIndex}`}/>\n    );\n    const rowComponent = <div className={styles.row} key={rowIndex}>{cols}</div>;\n    return rowComponent;\n};\n\nconst createMatrix = (state, styles) => {\n    if(state == null){\n        return null;\n    }\n    const matrix = state.map( (tetraminos , rowIndex) => {\n        return createTetrominoRow(tetraminos, rowIndex, state, styles);\n    });\n    return matrix;\n}\n\nexport {tetromino2Class, createMatrix}\n\n","import {useEffect, useState} from \"react\";\nimport styles from \"./Next.module.css\";\nimport {createMatrix} from \"../helpers/Helpers\";\n\nexport const Next = (props) => {\n    const [next, setNext] = useState(props.next);\n\n    useEffect(() => {\n        setNext(props.next);\n    }, [props.next])\n\n    const tetrominos = next?.tetrominos();\n    const matrix = tetrominos ? createMatrix(tetrominos) : \"\";\n\n    return (\n        <div>\n            <div class=\"title\">\n                <span>Next</span>\n            </div>\n           <div className={styles.matrix}>\n               {matrix}\n           </div>\n        </div>\n    )\n}\n\nexport default Next;\n\n","import {useEffect, useState} from \"react\";\n\nexport const Score = (props) => {\n    const [score, setScore] = useState(props.score);\n\n    useEffect(() => {\n        setScore(props.score);\n    }, [props.score])\n\n    return (\n        <div>\n            <span class=\"title\">Score</span>\n            <p class=\"gameText\">{score}</p>\n        </div>\n    )\n}\n\nexport default Score;\n","import {useEffect, useState} from \"react\";\nexport const Level = (props) => {\n    const [level, setLevel] = useState(props.level);\n\n    useEffect(() => {\n        setLevel(props.level);\n    }, [props.level])\n\n    return (\n        <div>\n            <span class=\"title\">Level</span>\n            <p class=\"gameText\">{level}</p>\n        </div>\n    )\n}\n\nexport default Level;\n","const TetrominoStates = {\n    EMPTY: 0,\n    FILLED: 1,\n    SHADOW: 2\n};\nconst Tetromino = (state, color) => {\n\n    let _state = state == null ? TetrominoStates.EMPTY : state;\n    let _color = color;\n\n    return {\n        isEmpty() {\n            return _state === TetrominoStates.EMPTY || _state === TetrominoStates.SHADOW;\n        },\n        isShadow() {\n            return _state === TetrominoStates.SHADOW;\n        },\n        isFilled() {\n            return _state === TetrominoStates.FILLED;\n        },\n        color: _color,\n        state: _state\n\n    }\n}\n\nexport {Tetromino, TetrominoStates};\n","import {Tetromino, TetrominoStates} from \"./Tetromino\";\nimport {randomColor} from \"./Colors\";\n\nconst Piece = ({x = 0, y = 0, color = randomColor(), state}) => {\n    const FILLED = 1;\n    let _x = x;\n    let _y = y;\n    let _color = color;\n    let _state = state;\n    let width = _state[0].length;\n    let height = _state.length;\n    const rotate = (matrixState) => {\n        let newState = [];\n        for(let i = 0; i < width; i ++){\n            newState.push([]);\n            for(let j = 0; j < height; j ++){\n                newState[i].push(_state[height - j - 1][i]);\n            }\n        }\n\n        const nextPieceState = Piece({x: _x, y: _y, color: _color, state: newState});\n        const leftMost = Math.min(...nextPieceState.matrixCoordinates().map(coordinate => coordinate.x));\n        let rightMost = Math.max(...nextPieceState.matrixCoordinates().map(coordinate => coordinate.x));\n\n        let newX = _x;\n        let newY = _y;\n\n        if(leftMost < 0){\n            newX  = _x + Math.abs(leftMost);\n        }\n\n        if(rightMost >= matrixState.width - 1){\n            newX = _x - (rightMost - (matrixState.width - 1));\n        }\n\n        return Piece({x: newX, y: newY, color: _color, state: newState});\n\n    };\n\n    const move = (x, y) => {\n        return Piece(x, y, _color, _state);\n    };\n\n    const moveLeft = () => {\n        let newX = _x - 1;\n        let newY = _y;\n\n        const leftMost = Math.min(...matrixCoordinates().map(coordinate => coordinate.x));\n        //if piece out of matrix after rotation, auto align coordinates.\n        if(leftMost <= 0){\n            newX = _x;\n        }\n\n        return Piece({x: newX, y: newY, color: _color, state:_state});\n    };\n\n    const moveRight = (matrixState) => {\n        let newX = _x + 1;\n        let newY = _y;\n\n        let rightMost = Math.max(...matrixCoordinates().map(coordinate => coordinate.x));\n        if(rightMost >= matrixState.width - 1){\n            newX = _x;\n        }\n        return Piece({x: newX, y: newY, color: _color, state:_state});\n    };\n\n    const matrixCoordinates = () => {\n        const coordinates = [];\n        for(let i = 0; i < height; i ++){\n            for(let j = 0; j < width; j++){\n                if(_state[i][j] === FILLED){\n                    coordinates.push({x: (j + _x), y: (i + _y)});\n                }\n            }\n        }\n        return coordinates;\n    };\n\n    const moveDown = (gameState) => {\n        const newY = _y + 1;\n        const piece = Piece({x: _x, y: newY, color, state});\n        const matrixCoordinates = piece.matrixCoordinates();\n        const canMoveDown = matrixCoordinates.every(coordinate => {\n            const canMove = (coordinate.y < gameState.height) && !gameState.isFilled(coordinate);\n            return canMove;\n        });\n\n        if(canMoveDown){\n            return piece;\n        } else {\n            const samePiece  = Piece({x: _x, y: _y, color, state});\n            return samePiece;\n        }\n    };\n\n    const isOnSamePosition = (piece) =>{\n        return _x === piece.x && _y === piece.y;\n    };\n\n    const toTetrominos = (state, color) => {\n        const tetrominos = [];\n        for(let i = 0; i < state.length; i ++){\n            const row = [];\n            for(let j = 0; j < state[0].length; j ++){\n                let tetromino = Tetromino();\n                if(state[i][j] === FILLED){\n                  tetromino = Tetromino(TetrominoStates.FILLED, color);\n                }\n                row.push(tetromino);\n            }\n            tetrominos.push(row);\n        }\n        return tetrominos;\n    };\n\n    const tetrominos = () => {\n        return toTetrominos(_state, _color);\n    };\n\n    return {\n        rotate,\n        move,\n        moveLeft,\n        moveRight,\n        moveDown,\n        x: _x,\n        y: _y,\n        isOnSamePosition,\n        matrixCoordinates,\n        color: _color,\n        tetrominos\n    };\n}\n\nconst I_Piece = () => {\n    let initalState =  [\n        [0,0,0,0],\n        [1,1,1,1],\n        [0,0,0,0],\n        [0,0,0,0],\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst O_Piece = () => {\n    let initalState =  [\n        [1,1],\n        [1,1],\n\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst Z_Piece = () => {\n    let initalState =  [\n        [1,1,0],\n        [0,1,1],\n        [0,0,0]\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst S_Piece = () => {\n    let initalState =  [\n        [0,1,1],\n        [1,1,0],\n        [0,0,0]\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst J_Piece = () => {\n    let initalState =  [\n        [1,0,0],\n        [1,1,1],\n        [0,0,0],\n\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst L_Piece = () => {\n    let initalState =  [\n        [0,0,1],\n        [1,1,1],\n        [0,0,0],\n\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst M_Piece = () => {\n    let initalState =  [\n        [1,1,1],\n        [0,1,0],\n        [0,0,0],\n\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst X_Piece = () => {\n    let initalState =  [\n        [1,0,1],\n        [0,1,0],\n        [1,0,1],\n\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\n\nconst empty_Piece = () => {\n    let initalState =  [\n        [0,0,0],\n        [0,0,0],\n        [0,0,0],\n\n    ];\n\n    const piece = Piece({state: initalState});\n    return piece;\n}\n\nconst randomPiece = () => {\n    const i = I_Piece();\n    const o = O_Piece();\n    const z = Z_Piece();\n    const s = S_Piece();\n    const j = J_Piece();\n    const l = L_Piece();\n    const m = M_Piece();\n\n    //eslint-disable-next-line no-unused-vars\n    const x = X_Piece();\n    const pieces = [\n        i,\n        o,\n        z,\n        s,\n        j,\n        l,\n        m,\n        //x --> experimental X piece.\n    ];\n\n    const rnd = Math.floor(Math.random() * pieces.length);\n    const randomPiece = pieces[rnd];\n    return randomPiece;\n}\n\nconst emtpyPiece = () => {\n    return empty_Piece();\n}\n\nexport {randomPiece, emtpyPiece};","import Next from \"./Next.js\";\nimport Score from \"./Score.js\";\nimport Level from \"./Level.js\";\nimport {createMatrix} from \"../helpers/Helpers\";\nimport React, {useState, useEffect} from 'react';\nimport styles from \"./Game.module.css\";\nimport {emtpyPiece} from \"../tetris/Piece\";\n\nexport const Game = (props) => {\n    const tetris = props.tetris;\n    const [state, setState] = useState(props.tetris.state);\n\n    const onStateChange = (_state) => {\n        setState(_state);\n    };\n\n    useEffect(() => {\n        tetris.onStateChange(onStateChange);\n    }, [tetris]);\n\n\n    let resumePauseButton;\n    if (state.isStarted()) {\n        if (state.isRunning()) {\n            resumePauseButton =\n                <button onClick={tetris.pause} className={`${styles.btn} ${styles.btnPause}`}>Pause</button>\n        } else {\n            resumePauseButton =\n                <button onClick={tetris.resume} className={`${styles.btn} ${styles.btnNew}`}>Resume</button>\n        }\n    }\n\n\n    const matrix = createMatrix(state.visibleMatrix(), styles);\n\n    const nextPiece = state.nextPiece();\n    const visibleNextPiece = nextPiece ? nextPiece : emtpyPiece();\n\n    const gameOver = state.isGameOver() ?\n        <div className={styles.gameOver}>\n            <p>Game Over</p>\n        </div>\n        :\n        '';\n\n    return (\n        <div className={styles.content}>\n            <div className={styles.header}><span>React Tetris</span></div>\n\n            <div className={styles.matrix}>\n                {matrix}\n                {gameOver}\n            </div>\n            <div className={styles.controls}>\n                <div className={styles.controlsNext}>\n                    <Next next={visibleNextPiece}/>\n                </div>\n                <div className={styles.controlsScore}>\n                    <Score score={state.score()}/>\n                </div>\n                <div className={styles.controlsLevel}>\n                    <Level level={state.level()}></Level>\n                </div>\n                <div className={styles.controlsButtons}>\n                    <div className={styles.row}>\n                        <button onClick={tetris.start} className={`${styles.btn} ${styles.btnNew}`}>New Game</button>\n                    </div>\n                    <div className={styles.row}>\n                        {resumePauseButton}\n                    </div>\n                </div>\n                <div className={styles.controlsInfo}>\n                    <p class=\"infoText\">\n                        Start/Pause/Resume: Space <br/>\n                        Rotate: Arrow Up <br/>\n                        Left: Arrow Left <br/>\n                        Right: Arrow Right <br/>\n                        Soft Drop: Arrow Down <br/>\n                    </p>\n                </div>\n            </div>\n        </div>\n    );\n\n}\n\nexport default Game;\n\n","import {Tetromino, TetrominoStates} from \"./Tetromino\";\nimport {randomPiece} from \"./Piece\";\n\nconst MAX_ROW_CLEAR_PER_LEVEL = 2;\n\nconst createState = (height, width) => {\n    let _height = height;\n    let _width = width;\n    let paused =  false;\n    let started = false;\n    let gameOver = false;\n    let _level =  1;\n    let _score = 0;\n    let _nextPiece = null;\n    let _currentPiece = null;\n    let totalNumberOfClearedRows = 0;\n    let onLevelChangeAction = null;\n\n    const isRunning = () => {\n        return started && !paused;\n    };\n\n    const isStarted = () => {\n        return started;\n    };\n\n    const isGameOver = () => {\n        return gameOver;\n    };\n\n    const isPaused = () => {\n        return paused;\n    };\n\n    const initMatrix = (height, width) => {\n        let _matrix = [];\n        for (let i = 0; i < height; i++) {\n            _matrix[i] = [];\n            for (let j = 0; j < width; j++) {\n                _matrix[i][j] = Tetromino();\n            }\n        }\n        return _matrix;\n    };\n\n    let matrix = initMatrix(height, width);\n    let _visibleMatrix = [...matrix];\n\n\n    const start = () => {\n        paused = false;\n        started = true;\n        gameOver = false;\n        _level = 1;\n        _score = 0;\n        matrix = initMatrix(_height, _width);\n        _currentPiece = randomPiece();\n        _nextPiece = randomPiece();\n        _visibleMatrix = createVisibleMatrix(matrix);\n    };\n\n    const pause = () => {\n        paused = true;\n    }\n\n    const resume = () => {\n        paused = false;\n    }\n\n    const sendNextPiece = () => {\n        _currentPiece = _nextPiece;\n        _nextPiece = randomPiece();\n    }\n\n    const isFilled = (coordinate) => {\n        return matrix[coordinate.y][coordinate.x].isFilled();\n    };\n\n    const increaseLevel = () => {\n        if (totalNumberOfClearedRows > MAX_ROW_CLEAR_PER_LEVEL) {\n            _level++;\n            totalNumberOfClearedRows = 0;\n            notifyLevelChangeListener(_level);\n        }\n    }\n\n    const moveCurrentPieceDown = () => {\n        if(_currentPiece == null){\n            return;\n        }\n\n        if(overlaps(_currentPiece)){\n            setGameOver();\n            return;\n        }\n        const newPosition = _currentPiece.moveDown({isFilled, height});\n        //piece cannot move down.\n        //merge piece into matrix and start a new piece.\n        if(newPosition.isOnSamePosition(_currentPiece)){\n            mergePieceIntoMatrix(newPosition);\n            sendNextPiece();\n        } else {\n            _currentPiece = newPosition;\n        }\n        const numberOfClearedRows = clearRows();\n        totalNumberOfClearedRows+=numberOfClearedRows;\n        increaseLevel();\n        _score = calculateScore(_score, numberOfClearedRows, _level);\n        _visibleMatrix = createVisibleMatrix(matrix);\n    };\n\n    const calculateScore = (_score, numberOfClearedRows, _level) => {\n        return _score + Math.pow(numberOfClearedRows, 2) * _level\n    }\n\n    const createVisibleMatrix = (matrix) => {\n        const visibleMatrix = matrix.map(row => row.slice());\n        if(_currentPiece != null){\n            _currentPiece.matrixCoordinates().forEach(coordinate => {\n                const tetromino = Tetromino(TetrominoStates.FILLED, _currentPiece.color);\n                visibleMatrix[coordinate.y][coordinate.x] = tetromino;\n            })\n        }\n        return visibleMatrix;\n    };\n\n    const overlaps = (piece) => {\n        const overlap = piece.matrixCoordinates().some( coordinate => {\n            return matrix[coordinate.y][coordinate.x].isFilled()\n        });\n\n        return overlap;\n    };\n\n    const setGameOver = () => {\n      started = false;\n      paused = false;\n      gameOver = true;\n    };\n\n    const mergePieceIntoMatrix = (piece) => {\n        piece.matrixCoordinates().forEach( coordinate => {\n            matrix[coordinate.y][coordinate.x] = Tetromino(TetrominoStates.FILLED, piece.color)\n        });\n    };\n\n    const rotateCurrentPiece = () => {\n        move(() => _currentPiece.rotate({width: _width}));\n    }\n\n    const moveLeft = () => {\n        move(() => _currentPiece.moveLeft());\n    }\n\n    const moveRight = () => {\n        move(() => _currentPiece.moveRight({width: _width}));\n    }\n\n    const move = (action) => {\n        if(_currentPiece == null){\n            return;\n        }\n        let nextPosition = action();\n        if(nextPosition != null && !overlaps(nextPosition)){\n            _currentPiece = nextPosition;\n            _visibleMatrix = createVisibleMatrix(matrix);\n        }\n    }\n\n    const clearRows = () => {\n        let numberOfClearedRows = 0;\n        for(let i = height - 1; i >= 0 ; ){\n            const allEmpty = matrix[i].every(cell => cell.isEmpty());\n            if(allEmpty){\n                break;\n            }\n\n            const allFilled = matrix[i].every(cell => cell.isFilled());\n            if(allFilled){\n                matrix.splice(i, 1);\n                const emtyRow = [];\n                for(let j = 0; j < width; j++){\n                    emtyRow.push(Tetromino());\n                }\n                matrix.unshift(emtyRow);\n                numberOfClearedRows++;\n            } else {\n                i--;\n            }\n        }\n        return numberOfClearedRows;\n    };\n\n    const visibleMatrix = () => {\n      return _visibleMatrix;\n    }\n\n    const score = () => {\n        return _score;\n    };\n\n    const level = () => {\n        return _level;\n    };\n\n    const nextPiece = () => {\n        return _nextPiece;\n    };\n\n    const onLevelChange = (action) => {\n        onLevelChangeAction = action;\n    };\n\n    const notifyLevelChangeListener = (level) => {\n        if(onLevelChangeAction){\n            onLevelChangeAction(level);\n        }\n    };\n\n    return {\n        isRunning,\n        isStarted,\n        isPaused,\n        start,\n        pause,\n        resume,\n        level,\n        score,\n        isFilled,\n        isGameOver,\n        moveCurrentPieceDown,\n        visibleMatrix,\n        rotateCurrentPiece,\n        moveLeft,\n        moveRight,\n        nextPiece,\n        onLevelChange\n    };\n};\n\nexport {createState};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './components/Game';\nimport {createTetris} from \"./tetris/Tetris\";\n\nconst tetris = createTetris();\ntetris.start();\ndocument.addEventListener(\"keydown\", (event) => {\n    const keyName = event.key;\n    if (tetris.isRunning()) {\n        if (keyName === \"ArrowUp\") {\n            tetris.rotateCurrentPiece();\n        } else if (keyName === \"ArrowDown\") {\n            tetris.tick();\n        }\n        else if (keyName === \"ArrowLeft\") {\n            tetris.moveLeft();\n        } else if (keyName === \"ArrowRight\") {\n            tetris.moveRight();\n        } else if (keyName === \" \") {\n            tetris.pause();\n        }\n    } else {\n        if(keyName === \" \") {\n            if (tetris.isPaused()) {\n                tetris.resume();\n            } else {\n                tetris.start();\n            }\n        }\n    }\n});\nReactDOM.render(\n    <React.StrictMode>\n        <Game tetris={tetris}/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n","import {createState} from \"./State.js\";\n\n\nconst createTetris = ({height, width} = {height: 20, width:10}) => {\n    const _height = height;\n    const _width = width;\n    const state = createState(_height, _width);\n    let timer = null;\n    const stateChangeListeners = [];\n\n    state.onLevelChange((level) => startTimer(timer, calculateSpeedForCurrentLevel(level)))\n\n    const startTimer = (timer, delay) => {\n        if (timer != null) {\n            clearInterval(timer);\n        }\n\n        const newTimer = setInterval(tick, delay)\n        return newTimer;\n    };\n\n    const stopTimer = (timer) => {\n        if (timer != null) {\n            clearInterval(timer);\n        }\n    };\n\n    const calculateSpeedForCurrentLevel = (level) => {\n        return 900 * (Math.pow(0.9, level - 1));\n    };\n\n\n    //eslint-disable-next-line no-unused-vars\n    const toString = () => {\n        let str = state.visibleMatrix().map(row => {\n            return row.map(tetromino => {\n                if (tetromino.isFilled()) {\n                    return tetromino.color;\n                } else {\n                    return tetromino.state;\n                }\n            }).join(\",\");\n        }).join(\"\\n\");\n\n        return str;\n    };\n\n    const tick = () => {\n        if (!state.isRunning()) {\n            return;\n        }\n\n        state.moveCurrentPieceDown();\n        if(state.isGameOver()){\n            stopTimer(timer);\n        }\n        notifyOnStateChangeListeners();\n    };\n\n    const notifyOnStateChangeListeners = () => {\n        stateChangeListeners.forEach(fn => fn({...state}));\n    };\n\n    const resume = () => {\n        state.resume();\n        notifyOnStateChangeListeners();\n        timer = startTimer(timer, calculateSpeedForCurrentLevel(state.level()));\n\n    };\n\n    const start = () => {\n        if (state.isStarted()) {\n            return;\n        }\n        state.start();\n        notifyOnStateChangeListeners();\n        timer = startTimer(timer, calculateSpeedForCurrentLevel(state.level()));\n    };\n\n    const pause = () => {\n        if (state.isPaused()) {\n            return;\n        }\n        if (timer != null) {\n            clearInterval(timer);\n        }\n        state.pause();\n        stopTimer(timer);\n        notifyOnStateChangeListeners();\n    };\n\n    const isPaused = () => {\n        return state.isPaused();\n    }\n\n    const moveLeft = () => {\n        state.moveLeft();\n        notifyOnStateChangeListeners();\n    };\n\n    const moveRight = () => {\n        state.moveRight();\n        notifyOnStateChangeListeners();\n    }\n\n    const rotateCurrentPiece = () => {\n        state.rotateCurrentPiece();\n        notifyOnStateChangeListeners();\n    }\n\n\n\n    return {\n        onStateChange(fn) {\n            stateChangeListeners.push(fn);\n        },\n    \n        isGameOver()  {\n            return state.gameOver;\n        },\n    \n        isRunning() {\n            return state.isRunning();\n        },\n    \n        isStarted() {\n            return state.isStarted();\n        },\n        state,\n        rotateCurrentPiece,\n        moveLeft,\n        moveRight,\n        start,\n        pause,\n        isPaused,\n        resume,\n        tick,\n        height: _height,\n        width: _width\n    };\n\n};\n\n\n\n\n\n/*\nclass J_Piece {\n    boxSize = 3;\n    state1 = (x, y) => {\n        state = [\n            {x: x, y: y + 1}, \n            {x: x + 1, y: y + 1}, \n            {x: x + 2, y: y + 1}, \n            {x: x + 2, y: y}\n        ],\n        next = () => this.state2;\n    };\n    state2 = (x, y) => {\n        state = [\n            {x: x + 2, y: y}, \n            {x: x + 2, y: y + 1}, \n            {x: x + 2, y: y + 2}, \n            {x: x + 1, y: y + 2}\n        ],\n        next = () => this.state3;\n    }; \n\n    state3 = (x, y) => {\n        state = [\n            {x: x, y: y}, \n            {x: x, y: y + 1}, \n            {x: x + 1, y: y + 1}, \n            {x: x + 2, y: y + 1}\n        ],\n        next = () => this.state4;\n    }; \n\n    state4 = (x, y) => {\n        state = [\n            {x: x + 1, y: y}, \n            {x: x + 2, y: y}, \n            {x: x + 1, y: y + 1}, \n            {x: x + 1, y: y + 2}\n        ],\n        next = () => this.state1;\n    }; \n\n    currentState = null;\n\n    constructor(state){\n        if(state == null){\n            currentState = this.state(0, 4);\n        } else {\n        this.currentState = state;\n        }\n    }\n\n    rotate(){\n        return new L_Piece(this.currentState.next());\n    }\n}\n\nclass O_Piece {\n    boxSize = 2;\n    state1 = (x, y) => {\n        state = [\n            {x: x, y: y}, \n            {x: x + 1, y: y}, \n            {x: x, y: y + 1}, \n            {x: x + 1, y: y + 1}\n        ],\n        next = () => this.state1;\n    };\n\n    currentState = null;\n\n    constructor(state){\n        if(state == null){\n            currentState = this.state(0, 3);\n        } else {\n        this.currentState = state;\n        }\n    }\n\n    rotate (){\n        return new O_Piece(this.currentState.next());\n    }\n}\n\nclass I_Piece {\n    state1 = (x, y) => {\n        state = [\n            {x: x, y: y}, \n            {x: x + 1, y: y}, \n            {x: x + 2, y: y}, \n            {x: x + 3, y: y}\n        ],\n        next = () => this.state2;\n    };\n\n    state2 = (x, y) => {\n        state = [\n            {x: x, y: y}, \n            {x: x, y: y + 1}, \n            {x: x, y: y + 2}, \n            {x: x, y: y + 3}\n        ],\n        next = () => this.state1;\n    };\n\n    currentState = null;\n\n    constructor(state){\n        if(state == null){\n            currentState = this.state(0, 4);\n        } else {\n        this.currentState = state;\n        }\n    }\n\n    rotate (){\n        return new I_Piece(this.currentState.next());\n    }\n}\n\nclass Z_Piece {\n    boxSize = 3;\n    state1 = (x, y) => {\n        state = [\n            {x: x + 1, y: y}, \n            {x: x + 1, y: y + 1}, \n            {x: x + 2, y: y + 1}, \n            {x: x + 2, y: y + 2}\n        ],\n        next = () => this.state2;\n    };\n\n    state2 = (x, y) => {\n        state = [\n            {x: x, y: y + 2}, \n            {x: x + 1, y: y + 2}, \n            {x: x + 1, y: y + 1}, \n            {x: x + 2, y: y + 1}\n        ],\n        next = () => this.state1;\n    };\n}\n\nclass S_Piece {\n    boxSize = 3;\n    state1 = (x, y) => {\n        state = [\n            {x: x + 1, y: y}, \n            {x: x + 1, y: y + 1}, \n            {x: x + 2, y: y + 1}, \n            {x: x + 2, y: y + 2}\n        ],\n        next = () => this.state2;\n    };\n\n    state2 = (x, y) => {\n        state = [\n            {x: x, y: y + 2}, \n            {x: x + 1, y: y + 2}, \n            {x: x + 1, y: y + 1}, \n            {x: x + 2, y: y + 1}\n        ],\n        next = () => this.state1;\n    };\n}\n\n\n\nclass M_Piece {\n    boxSize = 3;\n\n};\n\n*/\n\nexport {createTetris}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tetromino\":\"Cell_tetromino__VpulX\",\"empty\":\"Cell_empty__1v9KP\",\"red\":\"Cell_red__2T5b9\",\"green\":\"Cell_green__1LJp3\",\"blue\":\"Cell_blue__388TG\",\"yellow\":\"Cell_yellow__3jpWg\"};"],"sourceRoot":""}